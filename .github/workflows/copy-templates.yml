name: Copy Templates

on:
  workflow_dispatch:
    inputs:
      targets:
        description: "List of repository names to deploy to"
        required: true
      force:
        description: "Force copy even if file exists"
        required: false
      version:
        description: "Version to use for templates"
        required: false
      dry-run:
        description: "Whether to run in dry run mode"
        required: false
        default: 'false'

jobs:
  copy-templates:
    uses: ./.github/workflows/process.yml
    secrets: inherit
    with:
      targets: ${{ github.event.inputs.targets }}
      branch: uci/copy-templates
      script: copy-templates.sh
      defaults: |
        files:
          - .github/uci.yml
      override: |
        force: ${{ github.event.inputs.force }}
        versions:
          uci: ${{ github.event.inputs.version }}
      dry-run: ${{ github.event.inputs.dry-run == 'true' }}
